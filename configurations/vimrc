set nocompatible

" configure Vundle
filetype off

set rtp+=~/.vim/bundle/vundle/
call vundle#rc()

Bundle 'gmarik/vundle'
Bundle 'tpope/vim-sensible'
Bundle 'editorconfig/editorconfig-vim'
Bundle 'ervandew/supertab'
Bundle 'scrooloose/syntastic'
Bundle 'bling/vim-airline'
Bundle 'Townk/vim-autoclose'
Bundle 'tpope/vim-bundler'
Bundle 'altercation/vim-colors-solarized'
Bundle 'tpope/vim-commentary'
Bundle 'tpope/vim-endwise'
Bundle 'tpope/vim-eunuch'
Bundle 'tpope/vim-fugitive'
Bundle 'ngarbezza/vim-gobstones'
Bundle 'tpope/vim-markdown'
Bundle 'tsaleh/vim-matchit'
Bundle 'tangledhelix/vim-octopress'
Bundle 'tpope/vim-rails'
Bundle 'tpope/vim-repeat'
Bundle 'thoughtbot/vim-rspec'
Bundle 'ecomba/vim-ruby-refactoring'
Bundle 'tpope/vim-surround'
Bundle 'airblade/vim-gitgutter'

" General Settings
set encoding=utf-8
set title
set number
set numberwidth=3
set showtabline=2
set colorcolumn=80
set path=.,,**

" Tabs and indentation
set expandtab
set shiftwidth=2
set softtabstop=2

set autowrite
set suffixes=.bak,~,.swp,.o,.info,.aux,.log,.dvi,.bbl,.blg,.brf,.cb,.ind,.idx,.ilg,.inx,.out,.toc
set clipboard=unnamed
set ignorecase
set smartcase
set scrolloff=3
set term=xterm-256color
set visualbell
set mouse=a
set timeoutlen=500  " Time to wait after ESC (default causes an annoying delay)
set backupdir=~/temp/vimbackups,.
set directory=~/temp/vimbackups,.

" Keymaps
"
"  * general
"
map ;      :
map <Down> gj
map <Up>   gk
inoremap <A-d> <Esc>ddi
"
"  * move lines up/down
"
nnoremap <A-Down>  :m .+1<CR>==
nnoremap <A-Up>    :m .-2<CR>==
inoremap <A-Down>  <Esc>:m .+1<CR>==gi
inoremap <A-Up>    <Esc>:m .-2<CR>==gi
vnoremap <A-Down>  :m '>+1<CR>gv=gv
vnoremap <A-Up>    :m '<-2<CR>gv=gv
"
"  * navigate tabs
"
nnoremap <A-Left>  :tabprevious<CR>
nnoremap <A-Right> :tabnext<CR>
nnoremap <A-n>     :tabnew<CR>
inoremap <A-Left>  <Esc>:tabprevious<CR>i
inoremap <A-Right> <Esc>:tabnext<CR>i
inoremap <A-n>     <Esc>:tabnew<CR>
nnoremap <F3>      :tabe<Space>
nnoremap <F4>      :tabf<Space>
inoremap <F3>      <Esc>:tabe<Space>
inoremap <F4>      <Esc>:tabf<Space>
"
"  * navigate viewports
"
nnoremap <A-S-Up>    <C-w>k
nnoremap <A-S-Down>  <C-w>j
nnoremap <A-S-Left>  <C-w>h
nnoremap <A-S-Right> <C-w>l
inoremap <A-S-Up>    <Esc><C-w>ki
inoremap <A-S-Down>  <Esc><C-w>ji
inoremap <A-S-Left>  <Esc><C-w>hi
inoremap <A-S-Right> <Esc><C-w>li
"
"  * formatting
"
nnoremap <silent> <F5> :let _s=@/<Bar>:%s/\s\+$//e<Bar>:let @/=_s<Bar>:nohl<CR>:retab<CR>
"
"  * snippets
"
imap <C-l> <Space>=><Space>
"
"  * <leader> key mappings
"
nnoremap <Leader>gs  :Gstatus<CR>
nnoremap <Leader>gd  :Gdiff<CR>
nnoremap <Leader>h   :set hlsearch!<CR>
nnoremap <Leader>sh  :set list!<CR>
nnoremap <Leader>ss  :set syntax=
nnoremap <Leader>wh  :sp<CR>
nnoremap <Leader>wv  :vsp<CR>
nnoremap <Leader>tp  :set invpaste<CR>
"
"  * vim-rspec plugin mappings
"
map <Leader>sf :call RunCurrentSpecFile()<CR>
map <Leader>sc :call RunNearestSpec()<CR>
map <Leader>sl :call RunLastSpec()<CR>
map <Leader>sa :call RunAllSpecs()<CR>
"
"  * text handling
"
nnoremap Y y$
" Enter a blank line below/above cursor in Normal mode.
nmap ,o o<Esc>k
nmap ,O O<Esc>j

" GitGutter
let g:gitgutter_enabled = 0
map <Leader>gg :GitGutterToggle<CR>

" Powerline
set guifont=DejaVu\ Sans\ Mono\ for\ Powerline
let g:airline_powerline_fonts = 1

syntax on
set background=dark
colorscheme solarized
filetype on
filetype plugin on
filetype indent on
